include "ui.pixi"

resize(get_screen(), WINDOW_XSIZE, WINDOW_YSIZE)

$ui = UI(1, 8, 8)
$screen = $ui.Screen($ui)

$canvas_x = ($screen.w / 64) div 1
$canvas_y = ($screen.h / 64) div 1
$canvas = $ui.Canvas($ui, $screen, $canvas_x, $canvas_y, $screen.w - 2 * $canvas_x, $screen.h - 2 * $canvas_y, #000000)

$pad_size = $canvas.w
if $pad_size > $canvas.h {
    $pad_size = $canvas.h
}

$ctrl_w = ($pad_size / 9) div 1
$ctrl_h = $ctrl_w
$margin = $ctrl_w

$pad_size - 2 * $margin

$pad = $ui.Pad($ui, $canvas, $margin, $margin, $pad_size, $pad_size, #99aaff)

$toggle1 = $ui.Toggle($ui, $canvas, $pad_size + 2 * $margin, 1 * $margin, $ctrl_w, $ctrl_h, #55aa44)
$toggle2 = $ui.Toggle($ui, $canvas, $pad_size + 2 * $margin, 3 * $margin, $ctrl_w, $ctrl_h, #55aa44)
$toggle3 = $ui.Toggle($ui, $canvas, $pad_size + 2 * $margin, 5 * $margin, $ctrl_w, $ctrl_h, #55aa44)
$toggle4 = $ui.Toggle($ui, $canvas, $pad_size + 2 * $margin, 7 * $margin, $ctrl_w, $ctrl_h, #55aa44)

$vslider = $ui.VSlider($ui, $canvas, $pad_size + 4 * $margin, $margin, $ctrl_w, $pad_size, #aa4455)

fn gl_cb($ui) {
    set_screen(GL_SCREEN)
    $ui.draw($ui)
    set_screen($ui.screen)
}

//set_gl_callback(gl_cb, $ui)

while (1) {
    $ui.draw($ui)

    while get_event() {

        $ui.evt_listen($ui)

        if EVT[EVT_TYPE] == EVT_QUIT { breakall }
    }
    frame()
}

set_gl_callback(-1)
