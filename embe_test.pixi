include "list.pixi"
include "embe.pixi"
include "embe/osc.pixi"
include "embe/mod.pixi"
include "embe/biquad.pixi"
include "embe/delay.pixi"
include "embe/waveshaper.pixi"
include "embe/vis.pixi"

// Sound

$noise = a(osc_noise(0.25))
$comb = a(comb(440, 0.95, 0.25))
$mix = a(mix(0.25))

j($comb, $noise)

$v = vis_fft()
j($v, $comb)

out($comb)

while (1) {
    $v.render($v)

    while get_event() {
        if EVT[EVT_TYPE] == EVT_QUIT { breakall }
    }
    frame()
}
mutex_destroy(AUDIO_MUTEX)
shut()
halt
